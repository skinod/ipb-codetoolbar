var _codetool=window.IPBoard;window.newprettyPrint=window.prettyPrint;window.prettyPrint=function(b){return};_codetool.prototype.codetool={printFrame:null,init:function(){Event.observe(window,"load",ipb.codetool.initEvents)},initEvents:function(){$$("pre.prettyprint").each(function(b){ipb.codetool.addct(b)});ipb.delegate.register(".ctviewcode",ipb.codetool.viewcode);ipb.delegate.register(".ctprintSource",ipb.codetool.printSource);ipb.delegate.register(".ctabout",ipb.codetool.aboutSkinod);ipb.delegate.register(".ctTogglenum",ipb.codetool.togglenum);a=Ajax.Request;var a=new Class.create(Ajax.Request,{success:function($super){setTimeout(ipb.codetool.addnew,1000);return $super()}});Ajax.Request=a;Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];$$(".ctcopy").each(function(b){ipb.codetool.copy(b)});newprettyPrint()},addct:function(d){if(d.previous(".codetool")){return}var c=new Element("div",{"class":"codtBase"});c.insert({top:ipb.vars.ctoolbar.evaluate()});d.insert({before:c});c.insert(d);d.removeClassName("linenums:0");var a=d.className.match(/\blinenums\b(?::(\d+))?/);a||d.addClassName("linenums:1 nonum")},addnew:function(){$$("pre.prettyprint:not(.onetime)").each(function(a){if(!a.previous(".codetool")){ipb.codetool.addct(a);ipb.delegate.register(".ctviewcode",ipb.codetool.viewcode);ipb.delegate.register(".ctprintSource",ipb.codetool.printSource);ipb.delegate.register(".ctabout",ipb.codetool.aboutSkinod);ipb.delegate.register(".ctTogglenum",ipb.codetool.togglenum);ipb.codetool.copy(a.previous(".codetool").down(".ctcopy"))}newprettyPrint()})},copy:function(a){var b=a.up(".codtBase").down(".prettyprint").textContent;clip=new ZeroClipboard.Client;clip.setHandCursor(!0);clip.setText(b);clip.glue(a,a);clip.addEventListener("complete",function(c,d){ipb.global.showInlineNotification(ipb.vars.copyumsg)});a.observe("click",function(c){Event.stop(c)})},popup:function(d,c,f,b,e){var a=(screen.width-f)/2,h=(screen.height-b)/2;e+=", left="+a+", top="+h+", width="+f+", height="+b;e=e.replace(/^,/,"");var g=window.open(d,c,e);g.focus();return g},viewcode:function(c,b){Event.stop(c);var d=b.up(".codetool").next("pre.prettyprint").innerHTML;wnd=ipb.codetool.popup("","_blank",750,400,"location=0, resizable=1, menubar=0, scrollbars=1");wnd.document.write("<pre>"+d+"</pre>");wnd.document.close()},printSource:function(f,b){Event.stop(f);var g=b.up(".codetool").next("pre.prettyprint").innerHTML;var c=new Element("IFRAME"),d=null;if(ipb.codetool.printFrame!=null){ipb.codetool.printFrame.remove()}ipb.codetool.printFrame=c;c.style.cssText="position:absolute;width:0px;height:0px;left:-500px;top:-500px;";document.body.appendChild(c);d=c.contentWindow.document;d.write("<pre>"+g+"</pre>");d.close();c.contentWindow.focus();c.contentWindow.print()},aboutSkinod:function(a){Event.stop(a);if($("generic__okDialogue_popup")&&$("generic__okDialogue_popup").show()){return false}okContent="<h3>About CodeToolbar</h3><div class='row2 ipsPad ipsForm_center'><p><strong>CodeToolbar</strong> By <a href='http://skinod.com'>skinod.com</a><br>If you can please <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=Y7H3SGH56C9CG'>Donate</a> to us - Skinod &copy; 2013</p></div>";new ipb.Popup("generic__okDialogue",{type:"pane",initial:okContent,stem:true,hideAtStart:false,hideClose:false,defer:false,w:400})},togglenum:function(c,a){Event.stop(c);var b=a.up(".codetool").next("pre.prettyprint");b.toggleClassName("nonum")},};ipb.codetool.init();